<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prospec√ß√£o de Clientes Inativos</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <link rel="icon" href="icon-192.png" type="image/png">
</head>
<body>
    <h1>Prospec√ß√£o de Clientes Inativos</h1>
    
    <!-- Upload s√≥ aparece na aba inativos -->
    <div id="upload">
        <input type="file" id="xlsxFile" accept=".xlsx,.xls" />
        <button id="cadastrar-cliente-btn">‚ûï Cadastrar Cliente</button>
    </div>

    <div id="tabs">
        <button class="active" onclick="openTab('inativos')">Inativos</button>
        <button onclick="openTab('ativos')">Ativos</button>
        <button onclick="openTab('agenda')">Agenda</button>
        <button onclick="openTab('mapa')">Mapa</button>
    </div>

    <div id="inativos-content" class="tab-content active">
        <div id="filters">
            <input type="number" id="saldoFilter" placeholder="Saldo m√≠nimo de cr√©dito" min="0" step="0.01">
            <select id="sortOption">
                <option value="nome-az">Nome Fantasia (A-Z)</option>
                <option value="nome-za">Nome Fantasia (Z-A)</option>
                <option value="saldo-desc">Saldo de Cr√©dito (Maior-Menor)</option>
                <option value="saldo-asc">Saldo de Cr√©dito (Menor-Maior)</option>
                <option value="data-asc">Data √öltimo Pedido (Antigo-Recente)</option>
                <option value="data-desc">Data √öltimo Pedido (Recente-Antigo)</option>
            </select>
            <div id="cidadeSelector">
                <span id="cidadeSelectorText">Selecionar cidades</span>
                <span class="seta">‚ñº</span>
            </div>
            <div id="cidadeList" class="escondido"></div>
        </div>
        <ul id="list"></ul>
    </div>

    <div id="ativos-content" class="tab-content">
        <ul id="ativos-list"></ul>
    </div>

    <div id="agenda-content" class="tab-content">
        <div id="agenda-list"></div>
    </div>

    <div id="mapa-content" class="tab-content">
        <div id="mapa-controls">
            
            <span id="map-status">Carregando mapa...</span>
        </div>
        <div id="map" style="height: 400px;"></div>
    </div>

    <!-- Modal para detalhes do cliente -->
    <div id="modal">
        <div id="modal-content">
            <span id="close">√ó</span>
            <div id="client-details"></div>
            <div id="modal-actions">
                <a id="whatsapp-btn" href="#" target="_blank" class="whatsapp-btn">üì± WhatsApp</a>
                <a id="maps-btn" href="#" target="_blank" class="maps-btn">üó∫Ô∏è Tra√ßar Rota</a>
            </div>
            
            <h3>Agendamento</h3>
            <div>
                <label>Dia da Semana:</label>
                <select id="diaSemana">
                    <option value="">Selecione</option>
                    <option value="Domingo">Domingo</option>
                    <option value="Segunda">Segunda</option>
                    <option value="Ter√ßa">Ter√ßa</option>
                    <option value="Quarta">Quarta</option>
                    <option value="Quinta">Quinta</option>
                    <option value="Sexta">Sexta</option>
                    <option value="S√°bado">S√°bado</option>
                </select>
                <label>Hor√°rio:</label>
                <input type="time" id="horario">
                <label>Tipo:</label>
                <select id="tipo">
                    <option value="">Selecione</option>
                    <option value="Visita">Visita</option>
                    <option value="Liga√ß√£o">Liga√ß√£o</option>
                    <option value="WhatsApp">WhatsApp</option>
                </select>
                <label>Repeti√ß√£o:</label>
                <select id="repeticao">
                    <option value="Semanal">Semanal</option>
                    <option value="Quinzenal">Quinzenal</option>
                    <option value="Mensal">Mensal</option>
                </select>
                <button onclick="salvarAgendamento()">Salvar agendamento</button>
            </div>

            <h3>Status</h3>
            <div>
                <label id="labelEditDataPedido">Data √öltimo Pedido:</label>
                <input type="text" id="editDataPedido" placeholder="DD/MM/AAAA" maxlength="10">
                <button id="tornarAtivo" onclick="tornarAtivo()">Tornar Ativo</button>
                <button id="confirmarAtivo" onclick="confirmarAtivo()" style="display: none;">Confirmar Ativo</button>
                <button id="excluirAtivo" onclick="excluirAtivo()" style="display: none;">Excluir dos Ativos</button>
            </div>

            <h3>Observa√ß√µes</h3>
            <textarea id="observacoes" placeholder="Adicione observa√ß√µes sobre o cliente..." maxlength="2000"></textarea>
            <div id="observacoes-contador">0/2000</div>
            <button id="salvarObservacoes">Salvar Observa√ß√µes</button>
        </div>
    </div>

    <!-- Modal para cadastro de cliente -->
    <div id="modal-cadastro">
        <div id="modal-cadastro-content">
            <span id="close-cadastro">√ó</span>
            <h2>Cadastrar Novo Cliente</h2>
            <form id="form-cadastro">
                <div class="form-group">
                    <label>Nome Fantasia:</label>
                    <input type="text" id="nome-fantasia" required>
                </div>
                <div class="form-group">
                    <label>Cliente:</label>
                    <input type="text" id="cliente">
                </div>
                <div class="form-group">
                    <label>CNPJ/CPF:</label>
                    <input type="text" id="cnpj-cpf">
                </div>
                <div class="form-group">
                    <label>Contato:</label>
                    <input type="text" id="contato">
                </div>
                <div class="form-group">
                    <label>Telefone Comercial:</label>
                    <input type="text" id="telefone-comercial">
                </div>
                <div class="form-group">
                    <label>Celular:</label>
                    <input type="text" id="celular">
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="email">
                </div>
                <div class="form-group">
                    <label>Endere√ßo:</label>
                    <input type="text" id="endereco">
                </div>
                <div class="form-group">
                    <label>N√∫mero:</label>
                    <input type="text" id="numero">
                </div>
                <div class="form-group">
                    <label>Bairro:</label>
                    <input type="text" id="bairro">
                </div>
                <div class="form-group">
                    <label>Cidade:</label>
                    <input type="text" id="cidade">
                </div>
                <div class="form-group">
                    <label>UF:</label>
                    <input type="text" id="uf" maxlength="2">
                </div>
                <div class="form-group">
                    <label>CEP:</label>
                    <input type="text" id="cep">
                </div>
                <div class="form-group">
                    <label>Saldo de Cr√©dito:</label>
                    <input type="number" id="saldo-credito" step="0.01" min="0">
                </div>
                <div class="form-group">
                    <label>Data √öltimo Pedido:</label>
                    <input type="date" id="data-ultimo-pedido">
                </div>
                <div class="form-actions">
                    <button type="submit">Cadastrar</button>
                    <button type="button" onclick="fecharModalCadastro()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <button id="install-btn">Instalar App</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="database.js"></script>
    <script src="client-manager.js"></script>
    <script src="map.js"></script>
    <script src="script.js"></script>
</body>
</html>
